---
import Layout from "./_layout.astro";
import { getIndex } from "../utils/sanity";
import { Overline } from "~/components/Overline";
import { Heading } from "~/components/Heading";
import { Container } from "~/components/Container";
import BrowserWindow from "~/components/BrowserWindow";

import Blocks from "~/components/Blocks.astro";
import { BackgroundRadialGradient } from "~/components/BackgroundRadialGradient";
import { getRadialGradient } from "~/utils/getRadialGradient";

const data = await getIndex({
  preview: Astro.locals.preview,
  options: Astro.locals.loadQueryOptions,
});

// TODO: Come up with a better solution of handling a missing homepage.
//       Either show a blog index or show a default homepage.
if (!data) {
  return new Response(null, {
    status: 404,
    statusText: "Not found",
  });
}
---

<Layout seo={data.seo}>
  {data.blocks && <Blocks blocks={data.blocks} />}
</Layout>
