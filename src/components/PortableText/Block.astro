---
import type { Block, BlockProps } from "astro-portabletext/types";
import { usePortableText } from "astro-portabletext";
import { Overline } from "../Overline";
import { Heading } from "../Heading";

export type Props = BlockProps;

const props = Astro.props;
const { getDefaultComponent } = usePortableText(props.node);
const Default = getDefaultComponent();

type Blocks = typeof Default | typeof Overline | typeof Heading;

let Cmp: Blocks;

switch (props.node.style) {
  case "h1":
  case "h2":
  case "h3":
  case "h4":
  case "h5":
    Cmp = Heading;
    break;
  case "overline":
    Cmp = Overline;
    break;
  default:
    Cmp = Default;
    break;
}
---

<Cmp {...props}><slot /></Cmp>
